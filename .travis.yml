sudo: false
language: java
jdk: oraclejdk8
before_install:
- echo "org.gradle.daemon=true" >> ~/.gradle/gradle.properties
install:
- if [ "$TRAVIS_BRANCH" == "master" ]; then ./gradlew -PalvchUsername=$ARTIFACTORY_USERNAME
  -PalvchPassword=$ARTIFACTORY_PASSWORD -Penv=staging clean assemble; fi
- if [ "$TRAVIS_BRANCH" == "prod" ]; then ./gradlew -PalvchUsername=$ARTIFACTORY_USERNAME
  -PalvchPassword=$ARTIFACTORY_PASSWORD -Penv=prod clean assemble; fi
script:
- if [ "$TRAVIS_BRANCH" == "master" ]; then ./gradlew -PalvchUsername=$ARTIFACTORY_USERNAME
  -PalvchPassword=$ARTIFACTORY_PASSWORD -Penv=staging check; fi
- if [ "$TRAVIS_BRANCH" == "prod" ]; then ./gradlew -PalvchUsername=$ARTIFACTORY_USERNAME
  -PalvchPassword=$ARTIFACTORY_PASSWORD -Penv=prod check; fi
before_cache:
- rm -f $HOME/.gradle/caches/modules-2/modules-2.lock
cache:
  directories:
  - "$HOME/.m2/"
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/native/"
  - "$HOME/.gradle/wrapper/"
after_success:
- bash <(curl -s https://codecov.io/bash)
- ls $TRAVIS_BUILD_DIR/build/libs
notifications:
  webhooks:
  - https://buildtimetrend.herokuapp.com/travis
deploy:
  provider: releases
  api_key:
    secure: bpaCzMG2Df9KXElYE8saCPtoEdqImStydetFi1CE/mli+c8o301nluPu8KSh1nGAyMVp9v+KwaE18JVyJMlyFLWeWFwxghhccP7Re17+VS42TzfKmJkuShX1sR++wHfQ/GVS/QrDAh36CnAQVnMcgGAouszNHU47JqYGUxuRPcvgFahTRmmDckuPJxNk6+3N5fmRQaGxGPiP/yhByuLUrntExJGx2k2riXtiZomZ54KbjfkTALNvjT5rFmI/PM81tYoIdPS6+/GK8oo/5h0JKyClUtROYZb+SolGoMkm1szyF44uKVUylHG0/2+TJZAeNh+RQitmn4dZrKxxAiSFWVMkFlGD4FxndQavqQMjSOzLADbI2akRfoRLDXG7ejxvRRkr7VxDHVx55efZ47gc4T4e9CJVyF5b5ZWZ6p+NVx8il/jHBcDy4ooys1cdI487iLgKOIx1yN+EEE+8TDZYeR7Uyfoi+mCBwc0Qvw9mf3TzY69qVP7Ybprgv4vF3H1/E60W576uLG1VTedRdp1FE694R3esi6kKVvdqmy3ib8q+LOoO2WKrnJ9xdXxhgalPM+ivhosbCL+Wjoaag3EoAN0VzJYA9qME2Jh+xoqe+1LngtmVMl+7J/QhZaDlgsDB/3HK5Il1iCDZLMYvzyekffXinZ5hUIE7BHZ+X45Kl1o=
  file: "$TRAVIS_BUILD_DIR/build/libs/$TRAVIS_TAG.jar"
  skip_cleanup: true
  on:
    tags: true

