sudo: false
language: java
jdk: oraclejdk8
before_install:
- echo "org.gradle.daemon=true" >> ~/.gradle/gradle.properties
install:
- if [ "$TRAVIS_BRANCH" == "master" ]; then ./gradlew -PalvchUsername=$ARTIFACTORY_USERNAME
  -PalvchPassword=$ARTIFACTORY_PASSWORD -Penv=staging clean assemble; fi
- if [ "$TRAVIS_BRANCH" == "prod" ]; then ./gradlew -PalvchUsername=$ARTIFACTORY_USERNAME
  -PalvchPassword=$ARTIFACTORY_PASSWORD -Penv=prod clean assemble; fi
script:
- if [ "$TRAVIS_BRANCH" == "master" ]; then ./gradlew -PalvchUsername=$ARTIFACTORY_USERNAME
  -PalvchPassword=$ARTIFACTORY_PASSWORD -Penv=staging check; fi
- if [ "$TRAVIS_BRANCH" == "prod" ]; then ./gradlew -PalvchUsername=$ARTIFACTORY_USERNAME
  -PalvchPassword=$ARTIFACTORY_PASSWORD -Penv=prod check; fi
before_cache:
- rm -f $HOME/.gradle/caches/modules-2/modules-2.lock
cache:
  directories:
  - "$HOME/.m2/"
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/native/"
  - "$HOME/.gradle/wrapper/"
after_success:
- bash <(curl -s https://codecov.io/bash)
- ls $TRAVIS_BUILD_DIR/build/libs
notifications:
  webhooks:
  - https://buildtimetrend.herokuapp.com/travis
deploy:
  provider: releases
  api_key:
    secure: WWmIy3buFnQOgXC4m89DM2i2LrhSXk7pJtE+GcUDoytsd3XKvApwvnbsU0/hD2TyEM/cFHNj7m8ySthv5KAqHQV8Jmi5N/zK3JXk4miPrUbEplB3JTlZHmdHYZKxfKwQ6reRQ6HfaueukMwXTGoiuVpc6BFpC09A+TW/VQhnluOQ04OzL/n77oGBP8FEiFhahPWXrFghKh5tKH2ZStZouH2pz2erOO5f+hsM28J7XX2wR7OvF9L+PUIm9HVX3CYYGd3oLdVvsrCRLUrzhypEboEj3pPBxRSChricV+fwayrBtBnVhN1Nnnn509OyMMSvc96nVA4c6NaySmN0oR0o+YdXcalVhOtrolojDgKWHfi3OdqP0RgJH3aZnTIjN7P12hm1jg9t3bVoT20nuIenypiSq9WETdcjjgGbC41GyGGXJvRjUSMy1M9BKyLe2/7tfwSSMkd9Bc0tHIftbf7kbylx5auCJXl/PC3PPb82kfvS6bYfZipi0mhc2l0Df61/4U/+26FmW+qbp4rf0zBaDLX66IoSiERbuvoQ7HC4BWCDbtPAr9C+EVAx0fp9IxvvOMJghOgCnUQwJvzGV5o+H6KTld+Rh1392ci/pV5zhToV/QVO2gZlCIGYDUdQoWi98so0HQ+wDiDhGs+CHKSXbi1Tq0d/SMWsX/DHoRYtMlM=
  file: "$TRAVIS_BUILD_DIR/build/libs/$TRAVIS_TAG.jar"
  skip_cleanup: true
  on:
    tags: true
