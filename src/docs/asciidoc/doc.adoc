= JobRoom API Documentation !
Patrick Ellenberger <patrick.ellenberger@seco.admin.ch>
v0.0.1, February 2016: First draft
:doctype: book
:source-highlighter: highlightjs
:toc: left

:sectnums:
:sectnumlevels: 2

= General

//TODO : explain API is using standard REST conventions ("RESTful", HTTP methods behaviour, HAL, ...), JSON based

== HTTP verbs

Following verbs are fully supported :

[cols="20,80"]
|===
| Verb | Description

| GET | Used for retrieving resources, either a single object or a collection.
| POST | Used for creating new resources.
| PATCH | Used for updating existing resources with partial JSON data.
| DELETE | Used for deleting resources.
|===

== HTTP error handling

Errors in HTTP responses follow REST standards.

Following table describes examples and precisions related to JobRoom API :

[cols="20,20,60"]
|===
| Status code | Name | Description

| 200 | OK | Success using GET or PATCH for retrieving or updating resources.
| 201 | Created | Success using POST for creating new resources.
| 204 | No Content | Success using DELETE for deleting resources.
| 400 | Bad request | Occurs when error in body using POST/PATCH (missing non nullable field, invalid JSON object, wrong object type, etc.).
| 404 | Not Found | Occurs when requested resource does not exist.
| 405 | Method Not Allowed | Occurs when HTTP verb cannot be applied to requested endpoint (e.g. `POST /joboffers/1`)
| 406 | Not Acceptable | Occurs when `Accept` header format is not supported (e.g. `Accept:application/xml`)
| 412 | Precondition failed | Occurs when `If-Match` header does not match with current resource model (see _Optimistic locking_)
|===

== Headers

//TODO : explain headers that have to be added to requests

== Authentication

//TODO : explain authentication process (headers, token, validity, ...)

== Optimistic locking

//TODO

== Pagination

//TODO

= Job offers

//TODO : explain what a job offer is (??)

== Create a job offer

=== Access using curl
include::{snippets}/create-job-offer/curl-request.adoc[]

=== HTTP request
include::{snippets}/create-job-offer/http-request.adoc[]

=== HTTP response
include::{snippets}/create-job-offer/http-response.adoc[]

=== Request fields
include::{snippets}/create-job-offer/request-fields.adoc[]

==== job
include::{snippets}/create-job-offer-job/request-fields.adoc[]

==== company
include::{snippets}/create-job-offer-company/request-fields.adoc[]

==== contact
include::{snippets}/create-job-offer-contact/request-fields.adoc[]

==== application
include::{snippets}/create-job-offer-application/request-fields.adoc[]

== Get a job offer

=== Access using curl
include::{snippets}/get-job-offer/curl-request.adoc[]

=== HTTP request
include::{snippets}/get-job-offer/http-request.adoc[]

=== HTTP response
include::{snippets}/get-job-offer/http-response.adoc[]

=== Response fields
include::{snippets}/get-job-offer/response-fields.adoc[]

==== job
include::{snippets}/get-job-offer-job/response-fields.adoc[]

==== company
include::{snippets}/get-job-offer-company/response-fields.adoc[]

==== contact
include::{snippets}/get-job-offer-contact/response-fields.adoc[]

==== application
include::{snippets}/get-job-offer-application/response-fields.adoc[]

== Get all job offers

=== Access using curl
include::{snippets}/get-all-job-offers/curl-request.adoc[]

=== HTTP request
include::{snippets}/get-all-job-offers/http-request.adoc[]

=== HTTP response
include::{snippets}/get-all-job-offers/http-response.adoc[]

=== Response fields
include::{snippets}/get-all-job-offers/response-fields.adoc[]

== Edit a job offer

//TODO

== Delete a job offer

//TODO
